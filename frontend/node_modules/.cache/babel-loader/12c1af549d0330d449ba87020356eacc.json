{"ast":null,"code":"var _jsxFileName = \"H:\\\\MERAKI_Academy\\\\Projects\\\\MERAKI_Academy_Project_5\\\\frontend\\\\src\\\\components\\\\payment\\\\PaymentForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./payment.css\";\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Payment({\n  paymentId,\n  paymentReceiver,\n  price\n}) {\n  _s();\n\n  let token = localStorage.getItem(\"token\");\n  const [pay, setPay] = useState(false);\n  const CARD_OPTIONS = {\n    iconStyle: \"solid\",\n    style: {\n      base: {\n        iconColor: \"#C4F0FF\",\n        color: \"#fff\",\n        fontWeight: 500,\n        fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n        fontSize: \"16px\",\n        fontSmoothing: \"antialiased\",\n        \":-webkit-autofill\": {\n          color: \"#FCE883\"\n        },\n        \"::placeholder\": {\n          color: \"#87BBFD\"\n        }\n      },\n      invalid: {\n        iconColor: \"#FFC7EE\",\n        color: \"#FFC7EE\"\n      }\n    }\n  };\n\n  const payNow = () => {\n    console.log(\"paymentId\", paymentId);\n    console.log(\"paymentReceiver\", paymentReceiver);\n    console.log(\"price\", price);\n    let date = Date().split(\" GMT+0300 (Eastern European Summer Time)\")[0].replaceAll(\" \", \"-\");\n    axios.post(`http://localhost:5000/mypatient`, {\n      id: paymentId,\n      date\n    }, {\n      headers: {\n        authorization: \"Bearer \" + token\n      }\n    }).then(result => {\n      console.log(\"payment doctor result\", result.data);\n    }).catch(err => {\n      console.log(err);\n    });\n    axios.post(`http://localhost:5000/conversation`, {\n      receiver_id: paymentReceiver\n    }, {\n      headers: {\n        authorization: \"Bearer \" + token\n      }\n    }).then(result => {\n      console.log(result.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const [success, setSuccess] = useState(false);\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const {\n      error,\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement)\n    });\n\n    if (!error) {\n      try {\n        const {\n          id\n        } = paymentMethod;\n        const response = await axios.post(\"http://localhost:5000/payment\", {\n          amount: price * 100,\n          id\n        });\n\n        if (response.data.success) {\n          console.log(\"Successful payment\");\n          setSuccess(true);\n        }\n      } catch (error) {\n        console.log(\"Error\", error);\n      }\n    } else {\n      console.log(error.message);\n    }\n\n    payNow();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h4\",\n      children: /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"inter your credit Card details to continue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this), !success ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n        className: \"FormGroup\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"FormRow\",\n          children: /*#__PURE__*/_jsxDEV(CardElement, {\n            options: CARD_OPTIONS\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Pay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"congrats this is the best decision of you're life\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Payment, \"97hnTOUGUgSMNJtCN00NsTDSgak=\", false, function () {\n  return [useStripe, useElements];\n});\n\n_c = Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"sources":["H:/MERAKI_Academy/Projects/MERAKI_Academy_Project_5/frontend/src/components/payment/PaymentForm.js"],"names":["React","useState","axios","CardElement","useElements","useStripe","Payment","paymentId","paymentReceiver","price","token","localStorage","getItem","pay","setPay","CARD_OPTIONS","iconStyle","style","base","iconColor","color","fontWeight","fontFamily","fontSize","fontSmoothing","invalid","payNow","console","log","date","Date","split","replaceAll","post","id","headers","authorization","then","result","data","catch","err","receiver_id","success","setSuccess","stripe","elements","handleSubmit","e","preventDefault","error","paymentMethod","createPaymentMethod","type","card","getElement","response","amount","message"],"mappings":"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","sourcesContent":["\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./payment.css\";\r\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\"\r\n\r\nexport default function Payment({ paymentId, paymentReceiver, price }) {\r\n\r\n\r\n  let token = localStorage.getItem(\"token\");\r\n\r\n  const [pay, setPay] = useState(false);\r\n\r\n\r\n  const CARD_OPTIONS = {\r\n    iconStyle: \"solid\",\r\n    style: {\r\n        base: {\r\n            iconColor: \"#C4F0FF\",\r\n            color: \"#fff\",\r\n            fontWeight: 500,\r\n            fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\r\n            fontSize: \"16px\",\r\n            fontSmoothing: \"antialiased\",\r\n            \":-webkit-autofill\": { color: \"#FCE883\" },\r\n            \"::placeholder\": { color: \"#87BBFD\" }\r\n        },\r\n        invalid: {\r\n            iconColor: \"#FFC7EE\",\r\n            color: \"#FFC7EE\"\r\n        }\r\n    }\r\n}\r\n\r\n  const payNow = () => {\r\n    console.log(\"paymentId\",paymentId);\r\n    console.log(\"paymentReceiver\",paymentReceiver);\r\n    console.log(\"price\",price);\r\n    let date = Date()\r\n      .split(\" GMT+0300 (Eastern European Summer Time)\")[0]\r\n      .replaceAll(\" \", \"-\");\r\n\r\n\r\n    axios\r\n      .post(\r\n        `http://localhost:5000/mypatient`,\r\n\r\n        { id: paymentId ,\r\n          date},\r\n        {\r\n          headers: {\r\n            authorization: \"Bearer \" + token,\r\n          },\r\n        }\r\n      )\r\n      .then((result) => {\r\n\r\n        console.log(\"payment doctor result\", result.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    axios\r\n      .post(\r\n        `http://localhost:5000/conversation`,\r\n\r\n        { receiver_id: paymentReceiver },\r\n        {\r\n          headers: {\r\n            authorization: \"Bearer \" + token,\r\n          },\r\n        }\r\n      )\r\n      .then((result) => {\r\n        console.log(result.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const [success, setSuccess ] = useState(false)\r\n    const stripe = useStripe()\r\n    const elements = useElements()\r\n\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        const {error, paymentMethod} = await stripe.createPaymentMethod({\r\n            type: \"card\",\r\n            card: elements.getElement(CardElement)\r\n        })\r\n    if(!error) {\r\n        try {\r\n            const {id} = paymentMethod\r\n            const response = await axios.post(\"http://localhost:5000/payment\", {\r\n                amount: price*100,\r\n                id\r\n            })\r\n            if(response.data.success) {\r\n                console.log(\"Successful payment\")\r\n                setSuccess(true)\r\n            }\r\n        } catch (error) {\r\n            console.log(\"Error\", error)\r\n        }\r\n    } else {\r\n        console.log(error.message)\r\n    }\r\n\r\n    payNow()\r\n}\r\n\r\n\r\n  return (\r\n    <>\r\n        <div className=\"h4\">\r\n          <h4>inter your credit Card details to continue</h4>\r\n        </div>\r\n     \r\n\r\n        {!success ? \r\n        <form onSubmit={handleSubmit}>\r\n            <fieldset className=\"FormGroup\">\r\n                <div className=\"FormRow\">\r\n                    <CardElement options={CARD_OPTIONS}/>\r\n                </div>\r\n            </fieldset>\r\n            <button>Pay</button>\r\n        </form>\r\n        :\r\n       <div>\r\n           <h2>congrats this is the best decision of you're life</h2>\r\n       </div> \r\n        }\r\n\r\n\r\n\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}