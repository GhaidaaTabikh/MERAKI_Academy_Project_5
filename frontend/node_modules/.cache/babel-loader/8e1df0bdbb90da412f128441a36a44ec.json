{"ast":null,"code":"var _jsxFileName = \"H:\\\\MERAKI_Academy\\\\Projects\\\\MERAKI_Academy_Project_5\\\\frontend\\\\src\\\\components\\\\login\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setToken } from \"./../../reducers/login\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport \"./login.css\";\nimport Logo from \"./../../components/logo.png\";\nimport { GoogleLogin } from \"react-google-login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const history = useHistory();\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [state1, setState1] = useState(false);\n  const dispatch = useDispatch();\n\n  const signIn = () => {\n    axios.post(\"http://localhost:5000/login\", {\n      email,\n      password\n    }).then(result => {\n      setState1(false);\n      localStorage.setItem(\"token\", result.data.token);\n      localStorage.setItem(\"role_id\", result.data.role_id);\n      localStorage.setItem(\"user_id\", result.data.user_id);\n      console.log(result.data.user_id);\n      dispatch(setToken(result.data.token));\n      history.push(\"/\");\n    }).catch(err => {\n      setState1(true);\n      throw err;\n    });\n  };\n\n  const ResponseGoogle = response => {\n    console.log(\"all info\", response.profileObj);\n    console.log(\"name\", response.profileObj.givenName);\n    axios.post(\"http://localhost:5000/register\", {\n      firstName: response.profileObj.givenName,\n      lastName: response.profileObj.familyName,\n      email: response.profileObj.email,\n      password: response.profileObj.googleId\n    }).then(result => {\n      console.log(\"elllllllllllllllllllllllllllllseeeeeeeeeeeeeeeeeeee\", result);\n      localStorage.setItem(\"token\", result.data.token);\n      localStorage.setItem(\"role_id\", 1);\n      dispatch(setToken(response.accessToken));\n      history.push(\"/\");\n    }).catch(err => {\n      console.log(\"hiiiiiiiiiii mai\");\n      console.log(\" login err\", err.message, err.status);\n\n      if (err.message === \"Request failed with status code 400\") {\n        console.log(\"400 error\", err.message);\n        axios.post(\"http://localhost:5000/login\", {\n          email: response.profileObj.email,\n          password: response.profileObj.googleId\n        }).then(result => {\n          console.log(\"TOKEN\", result.data.token);\n          localStorage.setItem(\"token\", result.data.token);\n          localStorage.setItem(\"role_id\", 1);\n          localStorage.setItem(\"user_id\", result.data.user_id);\n          console.log(\"user_id\", result.data.user_id);\n          dispatch(setToken(response.accessToken));\n          history.push(\"/\");\n        }).catch(err => {\n          console.log(\" login errrrrrrrrrr\", err);\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: Logo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: e => {\n        setEmail(e.target.value);\n      },\n      type: \"email\",\n      placeholder: \"Enter E-mail Here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: e => {\n        setPassword(e.target.value);\n      },\n      type: \"password\",\n      placeholder: \"Enter Password Here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: signIn,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), state1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"20px auto\",\n        color: \"red\",\n        width: \"300px\",\n        textAlign: \"center\",\n        fontSize: \"22px\"\n      },\n      children: \"email or password not correct\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(GoogleLogin, {\n        clientId: \"788133413345-7e8m2mkms0qvf91jvr8m4j7p7sr8329h.apps.googleusercontent.com\",\n        onSuccess: ResponseGoogle,\n        onFailure: ResponseGoogle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\" \", \"Do not have an account ?\", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          className: \"render\",\n          to: \"/register\",\n          children: [\" \", \"Sign Up\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Join as a\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          className: \"render\",\n          to: \"/doctorInfo\",\n          children: \"Doctor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"nnC4RWXx2H9UeZ6kgESNC9R9kpU=\", false, function () {\n  return [useHistory, useDispatch];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["H:/MERAKI_Academy/Projects/MERAKI_Academy_Project_5/frontend/src/components/login/login.js"],"names":["React","useState","useEffect","axios","useDispatch","useSelector","setToken","Link","useHistory","Logo","GoogleLogin","Login","history","email","setEmail","password","setPassword","state1","setState1","dispatch","signIn","post","then","result","localStorage","setItem","data","token","role_id","user_id","console","log","push","catch","err","ResponseGoogle","response","profileObj","givenName","firstName","lastName","familyName","googleId","accessToken","message","status","e","target","value","margin","color","width","textAlign","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setToken } from \"./../../reducers/login\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport \"./login.css\";\r\nimport Logo from \"./../../components/logo.png\";\r\nimport { GoogleLogin } from \"react-google-login\";\r\n\r\nconst Login = () => {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [state1, setState1] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const signIn = () => {\r\n    axios\r\n      .post(\"http://localhost:5000/login\", { email, password })\r\n      .then((result) => {\r\n        setState1(false);\r\n        localStorage.setItem(\"token\", result.data.token);\r\n        localStorage.setItem(\"role_id\", result.data.role_id);\r\n        localStorage.setItem(\"user_id\", result.data.user_id);\r\n        console.log(result.data.user_id);\r\n        dispatch(setToken(result.data.token));\r\n        history.push(\"/\");\r\n      })\r\n      .catch((err) => {\r\n        setState1(true);\r\n        throw err;\r\n      });\r\n  };\r\n\r\n  const ResponseGoogle = (response) => {\r\n    console.log(\"all info\", response.profileObj);\r\n    console.log(\"name\", response.profileObj.givenName)\r\n    axios\r\n      .post(\"http://localhost:5000/register\", {\r\n        firstName: response.profileObj.givenName,\r\n        lastName: response.profileObj.familyName,\r\n        email: response.profileObj.email,\r\n        password: response.profileObj.googleId,\r\n      })\r\n      .then((result) => {\r\n      \r\n          console.log(\"elllllllllllllllllllllllllllllseeeeeeeeeeeeeeeeeeee\",result);\r\n          localStorage.setItem(\"token\", result.data.token);\r\n          localStorage.setItem(\"role_id\", 1);\r\n          dispatch(setToken(response.accessToken));\r\n          history.push(\"/\");\r\n       \r\n      })\r\n      .catch((err) => {\r\n        console.log(\"hiiiiiiiiiii mai\");\r\n      console.log(\" login err\",err.message,err.status);\r\n        if (err.message===\"Request failed with status code 400\") {\r\n          console.log(\"400 error\",err.message);\r\n          axios\r\n          .post(\"http://localhost:5000/login\", {\r\n            email: response.profileObj.email,\r\n            password: response.profileObj.googleId,\r\n          })\r\n          .then((result) => {\r\n            console.log(\"TOKEN\",result.data.token);\r\n            localStorage.setItem(\"token\",  result.data.token);\r\n            localStorage.setItem(\"role_id\", 1);\r\n            localStorage.setItem(\"user_id\", result.data.user_id);\r\n            console.log(\"user_id\", result.data.user_id);\r\n            dispatch(setToken(response.accessToken));\r\n            history.push(\"/\");\r\n          })\r\n          .catch((err) => {\r\n            console.log(\" login errrrrrrrrrr\",err);\r\n          });\r\n        }\r\n   \r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <img src={Logo} />\r\n      <input\r\n        onChange={(e) => {\r\n          setEmail(e.target.value);\r\n        }}\r\n        type=\"email\"\r\n        placeholder=\"Enter E-mail Here\"\r\n      />\r\n      <input\r\n        onChange={(e) => {\r\n          setPassword(e.target.value);\r\n        }}\r\n        type=\"password\"\r\n        placeholder=\"Enter Password Here\"\r\n      />\r\n      <button onClick={signIn}>Login</button>\r\n      {state1 ? (\r\n        <div\r\n          style={{\r\n            margin: \"20px auto\",\r\n            color: \"red\",\r\n            width: \"300px\",\r\n            textAlign: \"center\",\r\n            fontSize: \"22px\",\r\n          }}\r\n        >\r\n          email or password not correct\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <div>\r\n        <GoogleLogin\r\n          clientId=\"788133413345-7e8m2mkms0qvf91jvr8m4j7p7sr8329h.apps.googleusercontent.com\"\r\n          onSuccess={ResponseGoogle}\r\n          onFailure={ResponseGoogle}\r\n        />\r\n      </div>\r\n      <p>\r\n        {\" \"}\r\n        Do not have an account ?\r\n        <span>\r\n          <Link className=\"render\" to=\"/register\">\r\n            {\" \"}\r\n            Sign Up\r\n          </Link>\r\n        </span>\r\n      </p>{\" \"}\r\n      <p>\r\n        Join as a{\" \"}\r\n        <span>\r\n          <Link className=\"render\" to=\"/doctorInfo\">\r\n            Doctor\r\n          </Link>\r\n        </span>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}